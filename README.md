# 1日のスケジュール設計アプリ

<img width="1207" height="433" alt="image" src="https://github.com/user-attachments/assets/66116d76-4229-4e96-8407-72d92c3a306f" />

## 概要
このアプリケーションは、1日のスケジュールを視覚的に管理・設計するためのツールです。24時間のタイムラインに沿ってスケジュールを配置し、現在の進行状況や次の予定／フリーアラームまでの残り時間をリアルタイムで確認できます。

## 主な機能
- 24時間タイムラインでのスケジュール表示（基準時刻変更可）
- 30分単位でのスケジュール登録（色はカラーピッカーで選択）
- 複数のプロファイル管理（最後に選択したプロファイルを記憶）
- 重なったスケジュールの視覚的分割表示（半段/半透明で重なりを表現）
- タイムバー上のツールチップ表示（ホバーで詳細、進行中は経過/残りも表示）
- ステータス欄で現在進行中の予定を進捗バー付きで表示／未進行時は「次の予定」と「次のフリーアラーム」を表示
- スケジュールの追加・編集・削除（一覧の行内に編集/削除ボタン、ダブルクリック編集）
- フリーアラーム管理（時刻・ラベル・有効/無効、予定アラームと独立）
- 予定アラーム（開始/終了に通知音、トグルでON/OFF。重複鳴動防止＆取りこぼし防止の分単位チェック）
- ポモドーロ計時（ON/OFF、経過分表示、進捗バー、一時停止/再開、25分作業+5分休憩、休憩中は行内カウントダウン、自動次サイクル、効果音）
- DB確認ビューア（`schedules` テーブルの内容を一覧表示）
- ウィンドウ位置の記憶

## 技術仕様
- 開発言語: Python
- GUIフレームワーク: PySide6 (Qt)
- データベース: SQLite3
- 効果音: winsound.Beep（Windows）

## 起動方法
```
python app_day_schedule/app_day_schedule.py
```

## 使用方法
1. 起動すると24時間のタイムラインが表示される
2. 「スケジュール追加」から新規スケジュールを登録する
   - 予定名、開始/終了時刻（30分刻み）、色（カラーピッカー）を設定
   - 画面上部の「基準時刻」を変更すると、タイムラインの表示開始時刻を切り替え可能
3. 登録済みスケジュールは一覧に表示され、行内の「編集」「削除」ボタンまたはダブルクリックで編集できる
4. プロファイルで複数のスケジュールパターンを管理する
   - 「プロファイル管理」から新規作成／編集／削除（デフォルトは編集・削除不可）
   - 画面上部のコンボから切り替え（最後に選んだプロファイルをアプリが記憶）
5. フリーアラームを管理する
   - 「フリーアラーム」ボタンから一覧を開き、追加/編集/削除
   - 各アラームは個別に有効/無効を切り替え可能（予定アラームのトグルとは独立）
6. 「DB確認」ボタンで、`schedules` テーブルのレコードを確認できる

### ポモドーロの使い方
1. 画面上部のデジタル時計の右側にある「ポモドーロ」トグルをONにする
2. 経過分と進捗バー（25分で満了）が表示される
3. 必要に応じて「一時停止」「再開」ボタンで計測を制御する
4. 25分経過すると5分間の休憩に自動移行します。ダイアログは表示されず、同じ行に「休憩中 残り mm:ss」が表示されます。
5. 休憩が終了すると自動で次の25分作業が開始されます（トグルはONのまま）。
6. 効果音のタイミング
   - 開始: 高めの2音
   - 25分到達（休憩開始）: 上昇3音
   - 休憩終了: 下降3音
   - 停止: 低めの1音

### 予定アラームの使い方
1. 画面上部の「ポモドーロ」トグルの右側にある「予定アラーム」をONにする
2. 登録した各スケジュールの開始時刻と終了時刻に、短い通知音が鳴ります
3. 同一の予定・同一分に対しては重複して鳴らないようになっています（1日単位で自動リセット）
4. アラームを止めたい場合は「予定アラーム」をOFFにしてください
5. 取りこぼし防止のため、分が変わるたびに前回チェックから現在までの各分を順に判定します

### フリーアラームの使い方
1. 画面上部の「フリーアラーム」ボタンを押す
2. 一覧で「追加」「編集」「削除」を行う（各行のトグルで有効/無効を切り替え）
3. 指定時刻になると短い通知音が鳴ります（予定アラームのトグル状態に依存せず、各アラームの有効設定に従って動作）

### ステータス欄の表示について
- 現在進行中の予定がある場合：予定名、経過時間、残り時間、進捗バーを表示（複数同時進行にも対応）
- 現在進行中の予定がない場合：最も早く開始する「次の予定」と開始時刻、「開始までの残り時間」を表示
- 併せて「次のフリーアラーム」とその残り時間も表示

### タイムバー上の操作感
- バーにマウスオーバーするとツールチップで予定の詳細を表示（進行中なら経過/残りも）
- 予定が重なる場合、長い予定を上段、短い予定を下段に半高さで描画し、重なりを視覚化
- 現在時刻は赤線で表示

## 機能
- リアルタイム進行表示：現在時刻の赤線と、進行中予定の進捗可視化
- 進行状況表示：経過/残り時間、次の予定／フリーアラームまでの残り時間
- カラー管理：スケジュールごとに色分け（カラーピッカー）
- ウィンドウ位置記憶：前回位置を保存
- 基準時刻設定：表示開始時刻の変更
- プロファイル管理：追加・編集・削除（デフォルトは編集/削除不可）、最後の選択を記憶
- フリーアラーム：時刻・ラベル・有効/無効、予定アラームとは独立
- 予定アラーム：開始/終了で通知音、重複防止・取りこぼしに強い分単位チェック
- ポモドーロ計時：トグル、進捗バー、休憩カウントダウン、自動次サイクル、効果音
- DB確認：`schedules` の内容をGUIで確認

## 注意点
- スケジュールは最大24時間まで
- データはSQLiteデータベースに保存
- アプリケーションフォルダの書き込み権限が必要
- プロファイル削除時は紐づくスケジュールも削除
- デフォルトプロファイルは削除不可
- デフォルトプロファイルは編集も不可
- 効果音はWindows環境（winsound）で動作します
- フリーアラームは「予定アラーム」トグルに依存せず、各アラームの有効設定で鳴動します
- 分単位判定で取りこぼしを抑制していますが、PCのスリープ/休止明けなど極端な時間ジャンプでは通知できない場合があります

